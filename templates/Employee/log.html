<!DOCTYPE html>
<html>
<head>
    <!-- Basic Page Info -->
    <meta charset="utf-8">
    <title>HRMS</title>
    <link rel="icon" href="/static/logo/apple-touch-icon.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- Site favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="static/index/vendors/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="static/index/vendors/images/favicon-32x32.png">
    <link rel5115 rel="icon" type="image/png" sizes="16x16" href="static/index/vendors/images/favicon-16x16.png">

    <!-- Mobile Specific Metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- CSS -->
    <link rel="stylesheet" “

System: It looks like your request was cut off. You provided an HTML file for an HRMS application and asked to change the table to use AG Grid format without altering the logic. I'll proceed with converting the existing DataTables-based table in the provided HTML to AG Grid, ensuring all functionality (e.g., displaying leave data, cancel button with conditional disabling, and Django template logic) remains intact. I'll replace the DataTables setup with AG Grid, include necessary AG Grid scripts and styles, and configure the grid to match the existing table's columns and behavior.

Here’s the modified HTML with AG Grid integration:

<xaiArtifact artifact_id="e3a894eb-73b5-43af-9c25-c6bef3d2bd09" artifact_version_id="40941f51-3754-4581-a056-254500ac336a" title="index.html" contentType="text/html">
<!DOCTYPE html>
<html>
<head>
    <!-- Basic Page Info -->
    <meta charset="utf-8">
    <title>HRMS</title>
    <link rel="icon" href="/static/logo/apple-touch-icon.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- Site favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="static/index/vendors/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="static/index/vendors/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="static/index/vendors/images/favicon-16x16.png">

    <!-- Mobile Specific Metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="static/index/vendors/styles/core.css">
    <link rel="stylesheet" type="text/css" href="static/index/vendors/styles/icon-font.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/ag-grid-community@32.0.2/styles/ag-grid.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/ag-grid-community@32.0.2/styles/ag-theme-alpine.css">
    <link rel="stylesheet" type="text/css" href="static/index/vendors/styles/style.css">
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-119386393-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-119386393-1');
    </script>
     <style>
         .ag-header-cell {
            white-space: nowrap;
            text-align: left !important;
            background-color: #3f51b5;
        }
       

        .ag-header-cell:hover {
            background-color: #ffffff;
            color: rgb(13, 13, 13);
            border-right: 1px solid #5c6bc0;
            padding: 10px 8px;
        }
        </style>
</head>

<body>
    <div class="header">
        <div class="header-left">
            <div class="menu-icon dw dw-menu"></div>            
        </div>
        <div class="header-right">
            <div class="user-info-dropdown">
                <div class="dropdown">
                    <a class="dropdown-toggle" href="#" role="button" data-toggle="dropdown">
                        <span class="user-icon">
                            {% if k.image %}
                            <img src="{{ k.image.url }}" alt="" style="width: 100%; height:100% ">
                            {% else %}
                            <img src="/static/logo/userlogo.png" id="photo" style="width: 100%; height:100% ">
                            {% endif %} 
                        </span>
                        <span style="margin-left: 0px;" class="user-name">{{request.user.username}}</span>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right dropdown-menu-icon-list">
                        <a class="dropdown-item" href="{% url 'empcreatepersonalinfo' %}"><i class="dw dw-user1"></i> Profile</a>
                        <a class="dropdown-item" href="{% url 'logout' %}"><i class="dw dw-logout"></i> Logout</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="right-sidebar">
        <div class="sidebar-title">
            <h3 class="weight-600 font-16 text-blue">
                Settings
            </h3>
            <div class="close-sidebar" data-toggle="right-sidebar-close">
                <i class="icon-copy ion-close-round"></i>
            </div>
        </div>
        <div class="right-sidebar-body customscroll">
            <div class="right-sidebar-body-content">
                <h4 class="weight-600 font-18 pb-10"><a href="{% url 'department' %}">Department</a></h4>
                <h4 class="weight-600 font-18 pb-10"><a href="{% url 'subdepartment' %}">Sub Department</a></h4>
                <h4 class="weight-600 font-18 pb-10"><a href="{% url 'designation' %}">Designation</a></h4>
                <h4 class="weight-600 font-18 pb-10"><a href="{% url 'job' %}">Job Title</a></h4>
                <h4 class="weight-600 font-18 pb-10"><a href="{% url 'wrk' %}">Work location</a></h4>
            </div>
        </div>
    </div>
   
    <div class="left-side-bar">
        <div class="brand-logo mt-3">
            <a href="{% url 'emplog' %}">
                {% if request.user.company_type %}
                {% if request.user.company_type.inverse_logo %}
                <img src="{{ request.user.company_type.inverse_logo.url }}" style="width: 100%; height: 100%;">
                {% else %}
                <img src="/static/logo/deskapp-logo-white.svg" alt="" class="light-logo">
                {% endif %}
                {% else %}
                <img src="/static/logo/deskapp-logo-white.svg" alt="" class="light-logo">
                {% endif %}
            </a>
            <div class="close-sidebar" data-toggle="left-sidebar-close"> 
                <i class="ion-close-round"></i>
            </div>
        </div><br>
        <div class="menu-block customscroll">
            <div class="sidebar-menu">
                <ល0                    <ul id="accordion-menu">
                    <li class="dropdown"></li>
                    <li class="btn-primary active" style="background-color: black">
                        <a href="{% url 'empdash' %}" class="dropdown-toggle no-arrow">
                            <span class="micon dw dw-house-1"></span><span class="mtext"><b>Dashboard</b></span>
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'empoverview' %}" class="dropdown-toggle no-arrow">
                            <span class="micon dw dw-building"></span><span class="mtext"><b>Company Profile</b></span>
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'emppersonalinfonav' %}" class="dropdown-toggle no-arrow">
                            <span class="micon dw dw-user1"></span><span class="mtext"><b>My Profile</b></span>
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'empleave' %}" class="dropdown-toggle no-arrow">
                            <span class="micon dw dw-calendar-1"></span><span class="mtext"><b>Leave</b></span>
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'empdirectory' %}" class="dropdown-toggle no-arrow">
                            <span class="micon dw dw-list"></span><span class="mtext"><b>Directory</b></span>
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'empdailylog' %}" class="dropdown-toggle no-arrow">
                            <span class="micon bi bi-check2-square"></span><span class="mtext"><b>Attendance</b></span>
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'emp_calender' %}" class="dropdown-toggle no-arrow">
                            <span class="micon dw dw-calendar"></span><span class="mtext"><b>Holiday Calendar</b></span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
   
    <div class="main-container">
        <div class="card-box height-100-p overflow-hidden"> 
            <ul class="nav nav-tabs customtab" role="tablist">
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'empleave' %}" role="tab"><b>Apply Leave</b></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="{% url 'emplog' %}" role="tab"><b>Logs</b></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'empRules' %}" role="tab"><b>Rules</b></a>
                </li>
            </ul>
            <div class="pd-20 card-box">
                <div id="agGrid" class="ag-theme-alpine" style="height: 400px; width: 100%;"></div>
                {% if not data %}
                <p style="text-align: center;">No Data Found</p>
                {% endif %}
            </div>
        </div>
    </div>
    
    <!-- js -->
    <script src="static/index/vendors/scripts/core.js"></script>
    <script src="static/index/vendors/scripts/script.min.js"></script>
    <script src="static/index/vendors/scripts/process.js"></script>
    <script src="static/index/vendors/scripts/layout-settings.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ag-grid-community@32.0.2/dist/ag-grid-community.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const rowData = [
                {% for i in data %}
                {
                    leavetyp: "{{ i.leavetyp }}",
                    strtDate: "{{ i.strtDate }}",
                    endDate: "{{ i.endDate }}",
                    Days: {{ i.Days }},
                    Appliedon: "{{ i.Appliedon }}",
                    status: "{{ i.status }}",
                    action: {
                        id: {{ i.id }},
                        status: "{{ i.status }}"
                    }
                }{% if not forloop.last %},{% endif %}
                {% endfor %}
            ];

            const columnDefs = [
                { headerName: "Type", field: "leavetyp", sortable: true, filter: true },
                { headerName: "Start Date", field: "strtDate", sortable: true, filter: true },
                { headerName: "End Date", field: "endDate", sortable: true, filter: true },
                { headerName: "Days", field: "Days", sortable: true, filter: true },
                { headerName: "Applied on", field: "Appliedon", sortable: true, filter: true },
                { headerName: "Status", field: "status", sortable: true, filter: true },
                {
                    headerName: "Action",
                    field: "action",
                    cellRenderer: params => {
                        const isDisabled = params.data.status === 'Approved' || params.data.status === 'Rejected';
                        return `
                            <form action="{% url 'cancel_empleave' %}" method="post" style="display: inline;">
                                {% csrf_token %}
                                <input type="hidden" name="leave_id" value="${params.data.id}">
                                <button type="submit" class="btn" data-bgcolor="#303f9f" data-color="#ffffff" ${isDisabled ? 'disabled' : ''}>
                                    Cancel
                                </button>
                            </form>
                        `;
                    }
                }
            ];

            const gridOptions = {
                columnDefs: columnDefs,
                rowData: rowData,
                pagination: true,
                paginationPageSize: 10,
                domLayout: 'autoHeight',
                defaultColDef: {
                    resizable: true
                }
            };

            const gridDiv = document.querySelector('#agGrid');
            new agGrid.Grid(gridDiv, gridOptions);
        });
    </script>
</body>
</html>